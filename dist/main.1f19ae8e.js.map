{"version":3,"sources":["main.js"],"names":["Model","todos","JSON","parse","localStorage","getItem","callback","onTodoListChanged","setItem","stringify","todoText","todo","id","length","text","complete","push","_commit","updatedText","map","filter","View","app","getElement","form","createElement","input","type","placeholder","name","submitButton","textContent","append","title","style","textAlign","todoList","_temporaryTodoText","_initLocalListeners","value","tag","className","element","document","classList","add","selector","querySelector","firstChild","removeChild","p","forEach","li","checkbox","checked","span","contentEditable","strike","deleteButton","console","log","addEventListener","event","target","innerText","handler","preventDefault","_todoText","_resetInput","parseInt","parentElement","Controller","model","view","displayTodos","addTodo","editTodo","deleteTodo","toggleTodo","bindTodoListChanged","bindAddTodo","handleAddTodo","bindEditTodo","handleEditTodo","bindDeleteTodo","handleDeleteTodo","bindToggleTodo","handleToggleTodo"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nclass Model {\r\n  constructor() {\r\n    this.todos = JSON.parse(localStorage.getItem('todos')) || []\r\n  }\r\n\r\n  bindTodoListChanged(callback) {\r\n    this.onTodoListChanged = callback\r\n  }\r\n\r\n  _commit(todos) {\r\n    this.onTodoListChanged(todos)\r\n    localStorage.setItem('todos', JSON.stringify(todos))\r\n  }\r\n\r\n  addTodo(todoText) {\r\n    const todo = {\r\n      id: this.todos.length > 0 ? this.todos[this.todos.length - 1].id + 1 : 1,\r\n      text: todoText,\r\n      complete: false,\r\n    }\r\n\r\n    this.todos.push(todo)\r\n\r\n    this._commit(this.todos)\r\n  }\r\n\r\n  editTodo(id, updatedText) {\r\n    this.todos = this.todos.map(todo =>\r\n      todo.id === id ? { id: todo.id, text: updatedText, complete: todo.complete } : todo\r\n    )\r\n\r\n    this._commit(this.todos)\r\n  }\r\n\r\n  deleteTodo(id) {\r\n    this.todos = this.todos.filter(todo => todo.id !== id)\r\n\r\n    this._commit(this.todos)\r\n  }\r\n\r\n  toggleTodo(id) {\r\n    this.todos = this.todos.map(todo =>\r\n      todo.id === id ? { id: todo.id, text: todo.text, complete: !todo.complete } : todo\r\n    )\r\n\r\n    this._commit(this.todos)\r\n  }\r\n}\r\n\r\nclass View {\r\n  constructor() {\r\n    this.app = this.getElement('#root')\r\n    this.form = this.createElement('form')\r\n    this.input = this.createElement('input')\r\n    this.input.type = 'text'\r\n    this.input.placeholder = 'Add todo'\r\n    this.input.name = 'todo'\r\n    this.submitButton = this.createElement('button')\r\n    this.submitButton.textContent = 'Submit'\r\n    this.form.append(this.input, this.submitButton)\r\n    this.title = this.createElement('h1')\r\n    this.title.textContent = 'TODO-LIST'\r\n    this.title.style.textAlign = 'center'\r\n    this.todoList = this.createElement('ul', 'todo-list')\r\n    this.app.append(this.title, this.form, this.todoList)\r\n\r\n    this._temporaryTodoText = ''\r\n    this._initLocalListeners()\r\n  }\r\n\r\n  get _todoText() {\r\n    return this.input.value\r\n  }\r\n\r\n  _resetInput() {\r\n    this.input.value = ''\r\n  }\r\n\r\n  createElement(tag, className) {\r\n    const element = document.createElement(tag)\r\n\r\n    if (className) element.classList.add(className)\r\n\r\n    return element\r\n  }\r\n\r\n  getElement(selector) {\r\n    const element = document.querySelector(selector)\r\n\r\n    return element\r\n  }\r\n\r\n  displayTodos(todos) {\r\n    // Delete all notes\r\n    while (this.todoList.firstChild) {\r\n      this.todoList.removeChild(this.todoList.firstChild)\r\n    }\r\n\r\n    // Show default message\r\n    if (todos.length === 0) {\r\n      const p = this.createElement('p')\r\n      p.textContent = 'Nothing to do! Add a task?'\r\n      this.todoList.append(p)\r\n    } else {\r\n      // Create notes\r\n      todos.forEach(todo => {\r\n        const li = this.createElement('li')\r\n        li.id = todo.id\r\n\r\n        const checkbox = this.createElement('input')\r\n        checkbox.type = 'checkbox'\r\n        checkbox.checked = todo.complete\r\n\r\n        const span = this.createElement('span')\r\n        span.contentEditable = true\r\n        span.classList.add('editable')\r\n\r\n        if (todo.complete) {\r\n          const strike = this.createElement('s')\r\n          strike.textContent = todo.text\r\n          span.append(strike)\r\n        } else {\r\n          span.textContent = todo.text\r\n        }\r\n\r\n        const deleteButton = this.createElement('button', 'delete')\r\n        deleteButton.textContent = 'Delete'\r\n        li.append(checkbox, span, deleteButton)\r\n\r\n        // Append notes\r\n        this.todoList.append(li)\r\n      })\r\n    }\r\n\r\n    // Debugging\r\n    console.log('todos', todos)\r\n  }\r\n\r\n  _initLocalListeners() {\r\n    this.todoList.addEventListener('input', event => {\r\n      if (event.target.className === 'editable') {\r\n        this._temporaryTodoText = event.target.innerText\r\n      }\r\n    })\r\n  }\r\n\r\n  bindAddTodo(handler) {\r\n    this.form.addEventListener('submit', event => {\r\n      event.preventDefault()\r\n\r\n      if (this._todoText) {\r\n        handler(this._todoText)\r\n        this._resetInput()\r\n      }\r\n    })\r\n  }\r\n\r\n  bindDeleteTodo(handler) {\r\n    this.todoList.addEventListener('click', event => {\r\n      if (event.target.className === 'delete') {\r\n        const id = parseInt(event.target.parentElement.id)\r\n\r\n        handler(id)\r\n      }\r\n    })\r\n  }\r\n\r\n  bindEditTodo(handler) {\r\n    this.todoList.addEventListener('focusout', event => {\r\n      if (this._temporaryTodoText) {\r\n        const id = parseInt(event.target.parentElement.id)\r\n\r\n        handler(id, this._temporaryTodoText)\r\n        this._temporaryTodoText = ''\r\n      }\r\n    })\r\n  }\r\n\r\n  bindToggleTodo(handler) {\r\n    this.todoList.addEventListener('change', event => {\r\n      if (event.target.type === 'checkbox') {\r\n        const id = parseInt(event.target.parentElement.id)\r\n\r\n        handler(id)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\nclass Controller {\r\n  constructor(model, view) {\r\n    this.model = model\r\n    this.view = view\r\n\r\n    // Explicit this binding\r\n    this.model.bindTodoListChanged(this.onTodoListChanged)\r\n    this.view.bindAddTodo(this.handleAddTodo)\r\n    this.view.bindEditTodo(this.handleEditTodo)\r\n    this.view.bindDeleteTodo(this.handleDeleteTodo)\r\n    this.view.bindToggleTodo(this.handleToggleTodo)\r\n\r\n    // Display initial todos\r\n    this.onTodoListChanged(this.model.todos)\r\n  }\r\n\r\n  onTodoListChanged = todos => {\r\n    this.view.displayTodos(todos)\r\n  }\r\n\r\n  handleAddTodo = todoText => {\r\n    this.model.addTodo(todoText)\r\n  }\r\n\r\n  handleEditTodo = (id, todoText) => {\r\n    this.model.editTodo(id, todoText)\r\n  }\r\n\r\n  handleDeleteTodo = id => {\r\n    this.model.deleteTodo(id)\r\n  }\r\n\r\n  handleToggleTodo = id => {\r\n    this.model.toggleTodo(id)\r\n  }\r\n}\r\n\r\nconst app = new Controller(new Model(), new View())\r\n"]}